# ─────────────────────────────────────────────
# Server
# ─────────────────────────────────────────────
NODE_ENV=development
PORT=3000
API_KEY=your-secret-api-key-here
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
LOG_LEVEL=debug

# ─────────────────────────────────────────────
# PostgreSQL
# ─────────────────────────────────────────────
DB_HOST=localhost
DB_PORT=5432
DB_NAME=research_engine
DB_USER=postgres
DB_PASSWORD=yourpassword
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT_MS=10000
DB_POOL_CONNECTION_TIMEOUT_MS=5000
DB_SSL=false

# ─────────────────────────────────────────────
# Redis (BullMQ)
# ─────────────────────────────────────────────
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TLS=false

# ─────────────────────────────────────────────
# OpenRouter (Unified LLM Provider)
# ─────────────────────────────────────────────
OPENROUTER_API_KEY=sk-or-xxxxxxxx
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
# Default model to use if not specified
DEFAULT_MODEL=deepseek/deepseek-chat
# Shared settings
LLM_MAX_TOKENS=2000
LLM_TIMEOUT_MS=60000

# ─────────────────────────────────────────────
# Embeddings
# ─────────────────────────────────────────────
# Note: Embeddings still use OpenAI direct API usually, 
# but OpenRouter might support them? 
# For now assuming we keep OpenAI for embeddings or use a local one.
# User instruction implied replacing *LLM* section. 
# We will assume OpenAI for embeddings is separate or user replaces it.
# Keeping existing embedding config which likely points to OpenAI direct or compatible.
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536
EMBEDDING_BATCH_SIZE=100

# ─────────────────────────────────────────────
# Similarity Thresholds
# ─────────────────────────────────────────────
# Ideas with similarity >= CLUSTER_THRESHOLD are grouped into the same cluster
CLUSTER_THRESHOLD=0.80
# Ideas with similarity >= DEDUP_THRESHOLD are considered duplicates
DEDUP_THRESHOLD=0.85

# ─────────────────────────────────────────────
# Rate Limiting
# ─────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
RESEARCH_RATE_LIMIT_MAX=20

# ─────────────────────────────────────────────
# Queue (BullMQ)
# ─────────────────────────────────────────────
QUEUE_NAME=research-jobs
QUEUE_CONCURRENCY=3
JOB_ATTEMPTS=2
JOB_BACKOFF_MS=5000
